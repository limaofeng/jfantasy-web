<script type="text/javascript">
    $(function () {
        var imageUploader = $('#imageUploader').upload({data:{'dir':'brand_logo'},theme:'image',size:'160x160'});
        $("#saveForm").ajaxForm({
            beforeSerialize : function(zhis, options){
                var _data = {};
                options.data = _data;
                var _images = imageUploader.getData();
                if(_images.length > 0){
                    _data['details.avatar'] = _images[0].fileManagerId + ':' + _images[0].absolutePath;
                }
            },
            success: function (data) {
                top.$.msgbox({
                    msg: "保存成功",
                    type: "success"
                });
                $page$.backpage();
            }
        });
    });
</script>
<div class="pad10L pad10R">
    <div class="infobox warning-bg mrg10B">
        <p><i class="glyph-icon icon-exclamation mrg10R"></i>To view the available grid system options &amp; configurations you can visit the <a title="Fides Admin Grid System documentation" target="_blank" href="grid.html">Fides Admin Grid System documentation</a> page.</p>
    </div>
<div class="example-box">
<form id="saveForm" action="/security/users/save" method="post" cssClass="center-margin">
    <input type="hidden" name="id" value="{{user.id}}"/>
        <div class="col-md-6 pad10T">
              <div class="form-row">
                    <div class="form-label col-md-2">
                        <label for="">
                            用户名
                        </label>
                    </div>
                    <div class="form-input col-md-10">
                        <div class="append-left">
                            <input type="text" name="username" id="username" autocomplete="off" disabled="true" value="{{user.username}}"/>
                        </div>
                    </div>
              </div>
            <div class="form-row">
                <div class="form-label col-md-2">
                    <label for="">
                        密码
                    </label>
                </div>
                <div class="form-input col-md-10">
                    <div class="append-left">
                        <input type="password" name="password" value="{{user.password}}"/>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-label col-md-2">
                    <label for="">
                        呢称
                    </label>
                </div>
                <div class="form-input col-md-10">
                    <div class="append-left">
                        <input type="text" name="nickName"  value="{{user.nickName}}"/>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-label col-md-2">
                    <label for="">
                        邮箱
                    </label>
                </div>
                <div class="form-input col-md-10">
                    <div class="append-left">
                        <input type="text" name="details.email" value="{{user.details.email}}"/>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-label col-md-2">
                    <label for="">
                        角色
                    </label>
                </div>
                <div class="form-input col-md-10">
                    <div class="append-left form-checkbox-radio">
                        {{#roles}}
                            <label><input type="checkbox" name="roles.code" value="{{code}}" class="custom-checkbox" style="line-height:10px "/>{{name}}</label>
                        {{/roles}}
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-label col-md-2">
                    <label for="">
                        站点
                    </label>
                </div>
                <div class="form-input col-md-10">
                    <div class="append-left">
                        <select class="chosen-select" name="website.id">
                            {{#websites}}
                                <option value="{{key}}" {{#compare key '==' role.code}} checked="checked"{{/compare}}>{{name}}</option>
                            {{/websites}}
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-row" style="text-align: center;">
                <div>
                    <div style="float: left;padding-right: 50px;">
                        <a href="javascript:void(0);" class="btn medium primary-bg radius-all-4 menu-save4"  onclick="$('#saveForm').submit();return false;" title="保存"  >
                            <span class="glyph-icon icon-separator">
                                 <i class="glyph-icon icon-save"></i>
                            </span>
                             <span class="button-content">
                                 保存
                             </span>
                        </a>
                    </div>
                    <div style="float: left;">
                        <a href="javascript:void(0);" class="btn medium primary-bg radius-all-4 switch menu-view back-page "  title="返回">
                            <span class="glyph-icon icon-separator">
                                  <i class="glyph-icon icon-reply"></i>
                            </span>
                             <span class="button-content">
                                 返回
                             </span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    <div class="col-md-6 form-vertical">
        <div class="form-row">
            <div class="form-label col-md-2"></div>
            <div class="form-input col-md-10" id="imageUploader"></div>
        </div>
        <div class="form-row">
            <div class="form-label col-md-2">
                <label for="">
                   描述
                </label>
            </div>
            <div class="form-input col-md-10">
                <textarea name="details.description" class="small-textarea" css="height: 90px;">{{user.detauls.description}}</textarea>
            </div>
        </div>
    </div>

</@s.form>
</div>
</div>
